(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{1023:function(e,t,a){"use strict";a.d(t,"a",function(){return h});var i=a(1002),s=a(1008),n=a(42),l=a(13),r=a(1009),o=a(1),p=a.n(o);a(1005);class h extends o.Component{constructor(e){super(e),this.beforeUpload=(e=>{const t="image/jpeg"===e.type;t||r.a.error("You can only upload JPG file!");const a=e.size/1024/1024<2;return a||r.a.error("Image must smaller than 2MB!"),t&&a||this.setState({fileList:[]},()=>this.props.onChange([])),t&&a}),this.handleChange=(e=>{const{number:t}=this.props;if(e.fileList.length>t&&e.fileList.splice(e.fileList.length-t),"uploading"!==e.file.status){if("done"===e.file.status){const{fileList:t}=this.state;e.fileList.map(t=>{t.url||(t.url="http://p95py7ttw.bkt.clouddn.com/"+e.file.response.data)}),this.setState({fileList:e.fileList},()=>this.props.onChange(this.state.fileList))}}else this.setState({loading:!0})}),this.handleRemove=(e=>{e.fileList=[],this.setState({fileList:[]},()=>this.props.onChange([]))}),this.handlePreview=(e=>{this.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})}),this.handleCancel=(()=>this.setState({previewVisible:!1})),this.state={loading:!1,previewVisible:!1,fileList:e.value}}render(){const{previewVisible:e,previewImage:t,fileList:a}=this.state;return p.a.createElement("div",null,p.a.createElement(s.a,{name:"file",listType:this.props.type,className:"upload",showUploadList:this.props.show,defaultFileList:this.state.fileList,action:this.props.action,beforeUpload:this.beforeUpload,onChange:this.handleChange,onRemove:this.handleRemove,onPreview:this.handlePreview},p.a.createElement(n.a,null,p.a.createElement(l.a,{type:"upload"}),"Upload")),p.a.createElement(i.a,{visible:e,footer:null,onCancel:this.handleCancel},p.a.createElement("img",{alt:"preview",style:{width:"100%"},src:t})))}}h.defaultProps={type:"picture-card",show:!0,action:"https://m.shanghaim.net/v1/file/singleSave",fileList:[],number:2}},1024:function(e,t,a){"use strict";var i=a(1001),s=a(258),n=a(1),l=a.n(n);t.a=class extends n.Component{constructor(e){super(e),this.state={}}render(){return l.a.createElement("div",null,l.a.createElement(i.a,{columns:this.props.columns,dataSource:this.props.dataSource,pagination:!1,title:this.props.header,rowKey:e=>e.id,footer:()=>l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement(s.a,{current:this.props.current,showQuickJumper:!0,bordered:!0,total:this.props.total,showTotal:(e,t)=>`${t[0]}-${t[1]} 总共${e}条`,hideOnSinglePage:!0,onChange:e=>this.props.onChangePage(e),showSizeChanger:!0,onShowSizeChange:(e,t)=>this.props.onChangePageSize(e,t)}))}))}}},1026:function(e,t,a){"use strict";a.r(t);var i=a(1002),s=a(1e3),n=a(42),l=a(1),r=a.n(l),o=a(1024),p=a(115),h=a(49),c=a(96),d=a(97);const m=({page:e,pageSize:t,keyword:a=""})=>async i=>{let s=await Object(c.a)({url:d.a.musicList,method:"get",data:{page:e,pageSize:t}});i({type:"GET_LIST",data:{list:s.content,total:s.totalElements,page:e,pageSize:t,keyword:a}})},u=({page:e,pageSize:t,keyword:a=""})=>i=>{i({type:"PAGE_LIST",data:{list:(""!=a?data.filter(e=>e.name===a):data).slice((e-1)*t,(e-1)*t+t),page:e,pageSize:t}})};var g=a(138),b=a(1003),w=a(1023);a(1006);const C=b.a.Item;g.a.Option;var v=b.a.create()(class extends l.Component{constructor(e){super(e),this.handleSubmit=(e=>{e.preventDefault(),this.props.form.validateFieldsAndScroll((e,t)=>{e||this.props.onCancle()})}),this.state={}}render(){const{getFieldDecorator:e}=this.props.form,{name:t,artist:a,album:{picUrl:i,name:l},province:o}=this.props.data,p=i?[{uid:i,url:i,name:i}]:[];return r.a.createElement("div",null,r.a.createElement(b.a,{onSubmit:this.handleSubmit},r.a.createElement(C,{label:"Name",labelCol:{span:5},wrapperCol:{span:12}},e("name",{rules:[{required:!0,message:"请输入姓名"}],initialValue:t})(r.a.createElement(s.a,{disabled:!0}))),r.a.createElement(C,{label:"Artist",labelCol:{span:5},wrapperCol:{span:12}},e("artist",{rules:[{required:!0,message:"请输入年龄"}],initialValue:a.map(e=>e.name).join("、")})(r.a.createElement(s.a,{disabled:!0}))),r.a.createElement(C,{label:"Album",labelCol:{span:5},wrapperCol:{span:12}},e("album",{rules:[{required:!0,message:"请输入姓名"}],initialValue:l})(r.a.createElement(s.a,{disabled:!0}))),r.a.createElement(C,{label:"Picture",labelCol:{span:5},wrapperCol:{span:12}},e("picture",{initialValue:p,rules:[{required:!0,message:"请上传图片"}]})(r.a.createElement(w.a,{type:"picture-card",onChange:e=>e,number:1}))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(n.a,{style:{marginRight:"2rem"},onClick:()=>this.props.onCancle()},"取消"),r.a.createElement(n.a,{type:"primary",htmlType:"submit"},"确定"))))}});t.default=Object(p.connect)(e=>({data:e.tableReducer}),e=>({getListAction:Object(h.bindActionCreators)(m,e),pageAction:Object(h.bindActionCreators)(u,e)}))(class extends l.Component{constructor(e){super(e),this.columns=[{title:"Name",key:"name",dataIndex:"name",align:"center"},{title:"Artist",key:"artist",render:(e,t)=>r.a.createElement("span",null,t.artist.map(e=>e.name).join("、")),align:"center"},{title:"Operation",key:"opt",dataIndex:"opt",align:"center",render:(e,t)=>r.a.createElement("span",null,r.a.createElement(n.a,{onClick:()=>this.onView(t)},"查看"),r.a.createElement(n.a,{onClick:()=>this.onModify(t)},"修改"),r.a.createElement(n.a,{onClick:()=>void 0},"删除"))}],this.onChangePage=(e=>{const{pageSize:t,keyword:a}=this.props.data;this.props.getListAction({page:e,pageSize:t,keyword:a})}),this.onChangePageSize=((e,t)=>{const{keyword:a}=this.props.data;this.props.getListAction({page:1,pageSize:t,keyword:a})}),this.onSearch=(()=>{this.props.getListAction({page:1,pageSize:this.props.data.pageSize,keyword:this.state.keyword})}),this.onView=(e=>{this.setState({visible:1,title:"查看",vo:e})}),this.onModify=(e=>{this.setState({visible:2,title:"修改",vo:e})}),this.header=(()=>r.a.createElement("div",null,r.a.createElement(s.a,{placeholder:"请输入姓名",style:{width:"10rem",marginRight:"1rem"},value:this.state.keyword,ref:e=>this.inputName=e,onChange:()=>this.setState({keyword:this.inputName.input.value}),onPressEnter:this.onSearch}),r.a.createElement(n.a,{type:"primary",icon:"search",onClick:this.onSearch},"搜索"))),this.state={keyword:"",visible:0,title:"",vo:null}}componentDidMount(){this.props.getListAction({page:1,pageSize:this.props.data.pageSize})}render(){const{list:e,total:t,page:a}=this.props.data;return r.a.createElement("div",null,r.a.createElement(o.a,{columns:this.columns,dataSource:e,current:a,total:t,onChangePage:this.onChangePage,onChangePageSize:this.onChangePageSize,header:this.header}),r.a.createElement(i.a,{title:this.state.title,visible:0!==this.state.visible,maskClosable:!1,destroyOnClose:!0,keyboard:!1,width:800,footer:null,onCancel:()=>this.setState({visible:0})},r.a.createElement(v,{data:this.state.vo,isEdit:!0,onCancle:()=>this.setState({visible:0})})))}})}}]);